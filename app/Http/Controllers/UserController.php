<?php

namespace App\Http\Controllers;

use App\Models\Department;
use App\Models\Roles;
use Illuminate\Http\Request;
use App\Models\User;
use TCG\Voyager\Http\Controllers\VoyagerUserController;

class UserController extends VoyagerUserController
{
    public function changeLeader(User $user)
    {
        $user->leader = $user->leader?0:1;
        $user->save();
        return back()->with([
            'message' => "Muvafaqiyatli o'zgartirildi!"
        ]);
    }
    public function update(Request $request, $id)
    {
        $data = parent::update($request, $id); // TODO: Change the autogenerated stub
        if($data)
        {
            $user = User::find($id);
            $user->branch_id = Department::find($request->department_id)->branch_id;
            $user->push();
            return redirect()->back();
        }
    }
}
